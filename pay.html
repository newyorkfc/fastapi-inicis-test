<!doctype html>
<html lang="ko">
<head></head>
<body>
<h1>이니시스 결제창</h1>
<script charset="UTF-8" src="https://stdpay.inicis.com/stdjs/INIStdPay.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/sha256.js"></script>
<form id="payForm" accept-charset="UTF-8" method="POST">
    <input name="version" required="required" type="hidden" value="1.0">
    <input name="gopaymethod" required="required" type="hidden" value="Card">
    <input name="mid" required="required" type="hidden" value="INIpayTest">
    <input name="oid" required="required" type="hidden" value="">
    <input name="price" required="required" type="hidden" value="priceInput">
    <input name="timestamp" required="required" type="hidden" value="">
    <input name="use_chkfake" required="required" type="hidden" value="Y">
    <input name="signature" required="required" type="hidden" value="">
    <input name="verification" required="required" type="hidden" value="">
    <input name="mKey" required="required" type="hidden" value="">
    <input name="currency" required="required" type="hidden" value="WON">
    <input name="goodname" required="required" type="hidden" value="goodnameInput">
    <input name="buyername" required="required" type="hidden" value="buyernameInput">
    <input name="buyertel" required="required" type="hidden" value="buyertelInput">
    <input name="buyeremail" required="required" type="hidden" value="buyeremailInput">
    <input name="returnUrl" required="required" type="hidden" value="http://127.0.0.1:8000/return">
    <input name="closeUrl" required="required" type="hidden" value="http://127.0.0.1:8000/close">
    <input name="acceptmethod" required="required" type="hidden" value="centerCd(Y)">
</form>
<script>
    (function () {
        var price = document.querySelector('input[name="price"]').value;
        var oid = "ORDERID_" + Date.now();
        var timestamp = Date.now();
        var signature = CryptoJS.SHA256("oid=" + oid + "&price=" + price + "&timestamp=" + timestamp);
        var signKey = "SU5JTElURV9UUklQTEVERVNfS0VZU1RS"
        var verification = CryptoJS.SHA256("oid=" + oid + "&price=" + price + "&signKey=" + signKey + "&timestamp=" + timestamp);
        var mKey = CryptoJS.SHA256(signKey);

        document.querySelector('input[name="oid"]').value = oid;
        document.querySelector('input[name="timestamp"]').value = timestamp;
        document.querySelector('input[name="signature"]').value = signature;
        document.querySelector('input[name="verification"]').value = verification;
        document.querySelector('input[name="mKey"]').value = mKey;

        INIStdPay.pay('payForm', function (rsp) {
            console.log(rsp);
        });
    })();
</script>
</body>
</html>